!function(e){var t={};function o(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/bundles/ictechquickviewproductvideo/",o(o.s="w4us")}({w4us:function(e,t,o){"use strict";o.r(t);var i=Shopware,r=i.Component,n=i.Mixin,d=Shopware.Data.Criteria;r.override("sw-product-detail",{template:"{% block sw_product_detail_content_tabs_advanced_variants %}\n    {% parent %}\n{% endblock %}\n",inject:["acl","cmsService","repositoryFactory","seoUrlService"],mixins:[n.getByName("notification"),n.getByName("placeholder")],metaInfo:function(){return{title:this.$createTitle(this.identifier)}},props:{productId:{type:String,required:!1,default:null},landingPageId:{type:String,required:!1,default:null}},data:function(){return{bundle:null,overviewId:null}},created:function(){this.createdComponent()},computed:{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("productOverviewVideo"),e},mediaRepository:function(){return this.repositoryFactory.create("media")},identifier:function(){return this.product?this.placeholder(this.product,"name"):""},productRepository:function(){return this.repositoryFactory.create("product")},customFieldSetRepository:function(){return this.repositoryFactory.create("custom_field_set")}},methods:{createdComponent:function(){this.repository=this.repositoryFactory.create("product_overview_video"),this.$super("createdComponent")},getBundle:function(){var e=this,t=this.$route.params.id,o=new d;o.addSorting(d.sort("createdAt","DESC")),o.addFilter(d.equals("productId",t)),this.repository.search(o,Shopware.Context.api).then((function(t){e.bundle=t}))},Finish:function(){this.isSaveSuccessful=!1}}});function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var p=Shopware,l=p.Component,f=(p.Mixin,Shopware.Component.getComponentHelper()),m=(f.mapPropertyErrors,f.mapState),v=(f.mapGetters,Shopware.Data);v.EntityCollection,v.Criteria;l.override("sw-product-media-form",{template:'\n{% block sw_product_media_form_grid %}\n    {% parent %}\n    <sw-card\n        class="" :title="$tc(\'quickview-product.video.cardTitle\')" :isLoading="isLoading">\n        <sw-upload-listener\n            :upload-tag="mediaUploadTag"\n            auto-upload\n            @media-upload-finish="setMediaItem">\n        </sw-upload-listener>\n\n        <sw-media-upload-v2\n            :allow-multi-select="false"\n            variant="regular"\n            :upload-tag="mediaUploadTag"\n            :file-accept="fileAccept"\n            :default-folder="overViewVideoRepository.entityName"\n            :source="quickViewProductVideo"\n            :label="$t(\'quickview-product.video.productVideo\')"\n            @media-upload-sidebar-open="showMediaModal = true"\n            @media-upload-remove-image="onUnlinkLogo">\n        </sw-media-upload-v2>\n\n        {% block sw_product_detail_menu_media_modal %}\n            <sw-media-modal-v2\n                v-if="showMediaModal"\n                :allow-multi-select="false"\n                :entity-context="product.getEntityName()"\n                @media-modal-selection-change="onMediaSelectionChange"\n                @modal-close="showMediaModal = false"\n            />\n        {% endblock %}\n    </sw-card>\n{% endblock %}\n',inject:["repositoryFactory"],props:{fileAccept:{type:String,required:!1,default:"video/*"}},data:function(){return{repositoryAddMedia:null,mediaUploadTag:"sw-profile-upload-tag",quickViewProductVideo:null,showMediaModal:!1}},computed:c(c({},m("swProductDetail",["product"])),{},{mediaRepository:function(){return this.repositoryFactory.create("media")},overViewVideoRepository:function(){return this.repositoryFactory.create("product_overview_video")}}),created:function(){this.product.extensions.productOverviewVideo&&this.product.extensions.productOverviewVideo.mediaId&&this.loadMediaPreview(this.product.extensions.productOverviewVideo.mediaId)},methods:{openMediaSidebar:function(){this.$refs.mediaSidebarItem.openContent()},loadMediaPreview:function(e){var t=this;e&&this.mediaRepository.get(e).then((function(e){t.quickViewProductVideo=e}))},setMediaItem:function(e){var t=e.targetId;this.loadMediaPreview(t),this.product.extensions.productOverviewVideo||(this.product.extensions.productOverviewVideo=this.overViewVideoRepository.create()),this.product.extensions.productOverviewVideo.productId=this.product.id,this.product.extensions.productOverviewVideo.mediaId=t},onClickEditDomain:function(e){this.product=e,this.setCurrentDomainBackup(this.product),this.product.extensions.productOverviewVideo&&this.loadMediaPreview(this.product.extensions.productOverviewVideo.mediaId)},onCloseCreateDomainModal:function(){this.resetCurrentDomainToBackup(),this.product=null,this.quickViewProductVideo=null},onUnlinkLogo:function(){this.product.extensions.productOverviewVideo&&(this.product.extensions.productOverviewVideo.mediaId=null),this.quickViewProductVideo=null},onMediaSelectionChange:function(e){var t=this,o=e[0];o&&this.mediaRepository.get(o.id).then((function(e){t.product.mediaId=e.id,t.product.media=e}))}}})}});